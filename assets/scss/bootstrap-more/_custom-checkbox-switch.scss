
/*
Android style
    $custom-switch-track-height < $custom-switch-thumb-height
IOS style
    $custom-switch-track-height >= $custom-switch-thumb-height
 */

$custom-switch-track-height:              $custom-control-indicator-size !default;
$custom-switch-track-width:               $custom-switch-track-height * 2 !default;
$custom-switch-track-border-radius:       $custom-switch-track-height / 2 !default;
$custom-switch-track-box-shadow:          $custom-control-indicator-box-shadow !default;
$custom-switch-track-bg:                  $custom-control-indicator-bg !default;
$custom-switch-track-disabled-bg:         $custom-control-indicator-disabled-bg !default;
$custom-switch-track-active-bg:           $custom-control-indicator-active-bg !default;
$custom-switch-track-checked-bg:          $custom-control-indicator-checked-bg !default;
$custom-switch-track-checked-disabled-bg: $custom-control-indicator-checked-disabled-bg !default;
$custom-switch-track-focus-box-shadow:    $custom-control-indicator-focus-box-shadow !default;

$custom-switch-thumb-height:              1rem * $input-line-height !default;
$custom-switch-thumb-width:               $custom-switch-thumb-height !default;
$custom-switch-thumb-border-radius:       $custom-switch-thumb-height / 2 !default;
$custom-switch-thumb-box-shadow:          0 0 0.25rem rgba($black, 0.3) !default;
$custom-switch-thumb-bg:                  $input-bg !default;
$custom-switch-thumb-disabled-bg:         $custom-switch-thumb-bg !default;
$custom-switch-thumb-active-bg:           $custom-control-indicator-active-color !default;
$custom-switch-thumb-checked-bg:          $custom-control-indicator-checked-color !default;
$custom-switch-thumb-checked-disabled-bg: $custom-control-indicator-checked-color !default;
$custom-switch-thumb-active-w:            $custom-switch-thumb-width * 1.2 !default;
$custom-switch-thumb-focus-box-shadow:    $custom-switch-thumb-box-shadow !default;

$custom-switch-padding-inner: ($custom-switch-track-height - $custom-switch-thumb-height) / 2 !default;
$custom-switch-padding-outer: 0.5rem !default;
$custom-switch-transition:    all 0.15s ease-in-out !default;

@function custom-switch-thumb-left($checked) {
    @if ($checked == 1) {
        @if ($custom-switch-padding-inner > 0) {
            @return $custom-switch-track-width - $custom-switch-thumb-width - $custom-switch-padding-inner;
        } @else {
            @return $custom-switch-track-width - $custom-switch-thumb-width - $custom-switch-padding-inner * 2;
        }
    } @else {
        @if ($custom-switch-padding-inner > 0) {
            @return $custom-switch-padding-inner;
        } @else {
            @return 0;
        }
    }
}

.custom-switch {
    padding-left: 0;
    .custom-control-input {
        ~ .custom-control-label {
            @if ($custom-switch-padding-inner > 0) {
                padding-left: $custom-switch-track-width + $custom-switch-padding-outer;
            } @else {
                padding-left: $custom-switch-track-width + $custom-switch-padding-outer - $custom-switch-padding-inner * 2;
            }
            &::before,
            &::after {
                top: 0;
                transition: $custom-switch-transition;
                content: '';
            }
            &::before {
                @include gradient-bg($custom-switch-track-bg);
                @include box-shadow($custom-switch-track-box-shadow);
                border-radius: $custom-switch-track-border-radius;
                height: $custom-switch-track-height;
                width: $custom-switch-track-width;
                @if ($custom-switch-track-height < $custom-switch-thumb-height) {
                    top: ($custom-switch-thumb-height - $custom-switch-track-height) / 2;
                } @else {
                    top: 0;
                }
                @if ($custom-switch-padding-inner < 0) {
                    left: $custom-switch-padding-inner * -1;
                } @else {
                    left: 0;
                }
            }
            &::after {
                @include gradient-bg($custom-switch-thumb-bg);
                border-radius: $custom-switch-thumb-border-radius;
                box-shadow: $custom-switch-thumb-box-shadow;
                height: $custom-switch-thumb-height;
                width: $custom-switch-thumb-width;
                @if ($custom-switch-track-height > $custom-switch-thumb-height) {
                    top: $custom-switch-padding-inner;
                } @else {
                    top: 0;
                }
                left: custom-switch-thumb-left(0);
            }
        }
        &:checked {
            &:disabled ~ .custom-control-label {
                &::before {
                    background-color: $custom-switch-track-checked-disabled-bg;
                }
                &::after {
                    background-color: $custom-switch-thumb-checked-disabled-bg;
                }
            }
            ~ .custom-control-label {
                &::before {
                    @include gradient-bg($custom-switch-track-checked-bg);
                }
                &::after {
                    @include gradient-bg($custom-switch-thumb-checked-bg);
                    left: custom-switch-thumb-left(1);
                }
            }
        }
        &:focus ~ .custom-control-label {
            &::before {
                box-shadow: $custom-switch-track-focus-box-shadow;
            }
            &::after {
                box-shadow: $custom-switch-thumb-focus-box-shadow;
            }
        }
        &:disabled ~ .custom-control-label {
            &::before {
                background-color: $custom-switch-track-disabled-bg;
            }
            &::after {
                background-color: $custom-switch-thumb-disabled-bg;
            }
        }
        &:active ~ .custom-control-label {
            &::before {
                background-color: $custom-switch-track-active-bg;
            }
            &::after {
                background-color: $custom-switch-thumb-active-bg;
            }
        }
        //ios thumb increase effect
        @if($custom-switch-thumb-active-w != $custom-switch-thumb-width) {
            &:active {
                &:checked ~ .custom-control-label::after {
                    left: custom-switch-thumb-left(1) - ($custom-switch-thumb-active-w - $custom-switch-thumb-width);
                }
                ~ .custom-control-label::after {
                    width: $custom-switch-thumb-active-w;
                }
            }
        }
    }
}
