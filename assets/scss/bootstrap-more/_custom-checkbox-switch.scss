
/*
Android style
    $custom-checkbox-switch-track-h < $custom-checkbox-switch-after-h
    $custom-checkbox-switch-padding-in <= 0
IOS style
    $custom-checkbox-switch-track-h = $custom-checkbox-switch-after-h + $custom-checkbox-switch-padding-in
    $custom-checkbox-switch-padding-in > 0
 */

$custom-checkbox-switch-track-w:             2.2rem !default;
$custom-checkbox-switch-track-h:             1rem !default;
$custom-checkbox-switch-track-border-radius: $custom-checkbox-switch-track-h / 2 !default;
$custom-checkbox-switch-track-bg:            $custom-control-indicator-bg !default;
$custom-checkbox-switch-track-disabled-bg:   $custom-control-indicator-disabled-bg !default;
$custom-checkbox-switch-track-active-bg:     $custom-control-indicator-active-bg !default;
$custom-checkbox-switch-track-checked-bg:    $custom-control-indicator-checked-bg !default;
$custom-checkbox-switch-track-checked-disabled-bg: $custom-control-indicator-checked-disabled-bg !default;

$custom-checkbox-switch-thumb-w:              1.5rem !default;
$custom-checkbox-switch-thumb-h:              1.5rem !default;
$custom-checkbox-switch-thumb-border-radius:  $custom-checkbox-switch-thumb-h / 2 !default;
$custom-checkbox-switch-thumb-box-shadow:     0 0 0.3rem rgba(0, 0, 0, 0.3) !default;
$custom-checkbox-switch-thumb-bg:             $input-bg !default;
$custom-checkbox-switch-thumb-active-bg:      $custom-control-indicator-active-color !default;
$custom-checkbox-switch-thumb-checked-bg:     $custom-control-indicator-checked-color !default;
$custom-checkbox-switch-thumb-active-w:       $custom-checkbox-switch-thumb-w * 1.2 !default;

$custom-checkbox-switch-padding-in:           -0.2rem !default;
$custom-checkbox-switch-padding-outer:        0.5rem !default;
$custom-checkbox-switch-transition:           all 0.15s ease-in-out !default; //todo конкретно перечислить

//todo focus

//todo обыгать
$custom-control-indicator-size:         1rem !default;
$custom-control-indicator-bg-size:      50% 50% !default;
$custom-control-indicator-box-shadow:   inset 0 .25rem .25rem rgba($black, .1) !default;
$custom-control-label-disabled-color:   $gray-600 !default;
$custom-control-indicator-checked-color:        $component-active-color !default;
$custom-control-indicator-checked-box-shadow:   none !default;
$custom-control-indicator-focus-box-shadow:     0 0 0 1px $body-bg, $input-btn-focus-box-shadow !default;
$custom-control-indicator-active-box-shadow:    none !default;

@function custom-checkbox-switch-thumb-left($checked) {
    @if ($checked == 1) {
        @if ($custom-checkbox-switch-padding-in > 0) {
            @return $custom-checkbox-switch-track-w - $custom-checkbox-switch-thumb-w - $custom-checkbox-switch-padding-in;
        } @else {
            @return $custom-checkbox-switch-track-w - $custom-checkbox-switch-thumb-w - $custom-checkbox-switch-padding-in * 2;
        }
    } @else {
        @if ($custom-checkbox-switch-padding-in > 0) {
            @return $custom-checkbox-switch-padding-in;
        } @else {
            @return 0;
        }
    }
}

.custom-checkbox-switch {
    padding-left: 0;
    .custom-control-input {
        ~ .custom-control-label {
            @if ($custom-checkbox-switch-padding-in > 0) {
                padding-left: $custom-checkbox-switch-track-w + $custom-checkbox-switch-padding-outer;
            } @else {
                padding-left: $custom-checkbox-switch-track-w + $custom-checkbox-switch-padding-outer - $custom-checkbox-switch-padding-in * 2;
            }
            &::before,
            &::after {
                top: 0;
                transition: $custom-checkbox-switch-transition;
                content: '';
            }
            &::before {
                @include gradient-bg($custom-checkbox-switch-track-bg);
                border-radius: $custom-checkbox-switch-track-border-radius;
                height: $custom-checkbox-switch-track-h;
                width: $custom-checkbox-switch-track-w;
                @if ($custom-checkbox-switch-track-h < $custom-checkbox-switch-thumb-h) {
                    top: ($custom-checkbox-switch-thumb-h - $custom-checkbox-switch-track-h) / 2;
                }
                @if ($custom-checkbox-switch-padding-in < 0) {
                    left: $custom-checkbox-switch-padding-in * -1;
                }
            }
            &::after {
                @include gradient-bg($custom-checkbox-switch-thumb-bg);
                border-radius: $custom-checkbox-switch-thumb-border-radius;
                box-shadow: $custom-checkbox-switch-thumb-box-shadow;
                height: $custom-checkbox-switch-thumb-h;
                width: $custom-checkbox-switch-thumb-w;
                @if ($custom-checkbox-switch-track-h > $custom-checkbox-switch-thumb-h) {
                    top: ($custom-checkbox-switch-track-h - $custom-checkbox-switch-thumb-h) / 2;
                }
                left: custom-checkbox-switch-thumb-left(0);
            }
        }
        &:checked {
            ~ .custom-control-label {
                &::before {
                    @include gradient-bg($custom-checkbox-switch-track-checked-bg);
                }
                &::after {
                    @include gradient-bg($custom-checkbox-switch-thumb-checked-bg);
                    left: custom-checkbox-switch-thumb-left(1);
                }
            }
        }
        &:disabled {
            &:checked ~ .custom-control-label::before {
                background-color: $custom-checkbox-switch-track-checked-disabled-bg;
            }
            ~ .custom-control-label::before {
                background-color: $custom-checkbox-switch-track-disabled-bg;
            }
        }
        &:active {
            ~ .custom-control-label {
                &::before {
                    background-color: $custom-checkbox-switch-track-active-bg;
                }
                &::after {
                    background-color: $custom-checkbox-switch-thumb-active-bg;
                }
            }
        }
        //ios thumb increase effect
        @if($custom-checkbox-switch-thumb-active-w != $custom-checkbox-switch-thumb-w) {
            &:active {
                &:checked {
                    ~ .custom-control-label {
                        &::after {
                            left: custom-checkbox-switch-thumb-left(1) - ($custom-checkbox-switch-thumb-active-w - $custom-checkbox-switch-thumb-w);
                        }
                    }
                }
                ~ .custom-control-label {
                    &::after {
                        width: $custom-checkbox-switch-thumb-active-w;
                    }
                }
            }
        }
    }
}
