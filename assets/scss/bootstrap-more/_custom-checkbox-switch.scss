
/*
Android style
    $custom-checkbox-switch-track-h < $custom-checkbox-switch-after-h
    $custom-checkbox-switch-padding-in <= 0
IOS style
    $custom-checkbox-switch-track-h = $custom-checkbox-switch-after-h + $custom-checkbox-switch-padding-in
    $custom-checkbox-switch-padding-in > 0
 */

$custom-checkbox-switch-track-w:             2.2rem !default;
$custom-checkbox-switch-track-h:             1rem !default;
$custom-checkbox-switch-track-border-radius: $custom-checkbox-switch-track-h / 2 !default;
$custom-checkbox-switch-track-color:         $custom-control-indicator-bg !default;
$custom-checkbox-switch-track-color-checked: $custom-control-indicator-checked-bg !default;
$custom-checkbox-switch-thumb-w:              1.5rem !default;
$custom-checkbox-switch-thumb-h:              1.5rem !default;
$custom-checkbox-switch-thumb-border-radius:  $custom-checkbox-switch-thumb-h / 2 !default;
$custom-checkbox-switch-thumb-box-shadow:     0 0 0.3rem rgba(0, 0, 0, 0.3) !default;
$custom-checkbox-switch-thumb-color:          $input-bg !default;
$custom-checkbox-switch-thumb-color-checked:  $input-bg !default;
$custom-checkbox-switch-padding-in:           -0.2rem !default;
$custom-checkbox-switch-padding-outer:        0.5rem !default;
$custom-checkbox-switch-transition:           all 0.3s ease-in-out !default;

@mixin custom-checkbox-switch-after-margin-left($checked) {
    @if ($checked == 1) {
        @if ($custom-checkbox-switch-padding-in > 0) {
            left: $custom-checkbox-switch-track-w - $custom-checkbox-switch-thumb-w - $custom-checkbox-switch-padding-in;
        } @else {
            left: $custom-checkbox-switch-track-w - $custom-checkbox-switch-thumb-w - $custom-checkbox-switch-padding-in * 2;
        }
    } @else {
        @if ($custom-checkbox-switch-padding-in > 0) {
            left: $custom-checkbox-switch-padding-in;
        } @else {
            left: 0;
        }
    }
}

.custom-checkbox-switch {
    padding-left: 0;
    .custom-control-input {
        ~ .custom-control-label {
            cursor: pointer;
            @if ($custom-checkbox-switch-padding-in > 0) {
                padding-left: $custom-checkbox-switch-track-w + $custom-checkbox-switch-padding-outer;
            } @else {
                padding-left: $custom-checkbox-switch-track-w + $custom-checkbox-switch-padding-outer - $custom-checkbox-switch-padding-in * 2;
            }
            &::before,
            &::after {
                top: 0;
                transition: $custom-checkbox-switch-transition;
                content: '';
            }
            &::before {
                @include gradient-bg($custom-checkbox-switch-track-color);
                border-radius: $custom-checkbox-switch-track-border-radius;
                height: $custom-checkbox-switch-track-h;
                width: $custom-checkbox-switch-track-w;
                @if ($custom-checkbox-switch-track-h < $custom-checkbox-switch-thumb-h) {
                    top: ($custom-checkbox-switch-thumb-h - $custom-checkbox-switch-track-h) / 2;
                }
                @if ($custom-checkbox-switch-padding-in < 0) {
                    left: $custom-checkbox-switch-padding-in * -1;
                }
            }
            &::after {
                @include gradient-bg($custom-checkbox-switch-thumb-color);
                border-radius: $custom-checkbox-switch-thumb-border-radius;
                box-shadow: $custom-checkbox-switch-thumb-box-shadow;
                height: $custom-checkbox-switch-thumb-h;
                width: $custom-checkbox-switch-thumb-w;
                @if ($custom-checkbox-switch-track-h > $custom-checkbox-switch-thumb-h) {
                    top: ($custom-checkbox-switch-track-h - $custom-checkbox-switch-thumb-h) / 2;
                }
                @include custom-checkbox-switch-after-margin-left(0);
            }
        }
        &:checked {
            ~ .custom-control-label {
                &::before {
                    @include gradient-bg($custom-checkbox-switch-track-color-checked);
                }
                &::after {
                    @include gradient-bg($custom-checkbox-switch-thumb-color-checked);
                    @include custom-checkbox-switch-after-margin-left(1);
                }
            }
        }
    }
}
